services:
  hummingbot:
    image: hummingbot/hummingbot:latest
    container_name: antigravity-engine
    volumes:
      - ./conf:/conf
      - ./controllers:/conf/controllers
      - ./scripts:/conf/scripts
      - ./logs:/logs
      - ./data:/data
    environment:
      - CONFIG_PASSWORD=a
      - BYBIT_API_KEY=${BYBIT_API_KEY}
      - BYBIT_API_SECRET=${BYBIT_API_SECRET}
      - LLM_API_KEY=${LLM_API_KEY}
    network_mode: host
    tty: true
    stdin_open: true
    # Command to auto-start the script using the correct conda environment
    command: /bin/bash -lc "conda activate hummingbot && python bin/hummingbot.py start --script /conf/scripts/antigravity_loader.py"

  dashboard:
    image: hummingbot/dashboard:latest
    container_name: antigravity-dashboard
    # Using host network to allow easier connection to local resources if needed
    network_mode: host
    volumes:
      - ./data:/data
    environment:
      - AUTH_SYSTEM_ENABLED=False
    restart: always

# Note: Dashboard connects to HB via shared volume (sqlite DB).
